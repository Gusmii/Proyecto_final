<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	 -->
	<link rel="stylesheet" href="index.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<title>GusPie E-shop</title>
</head>

<body>

	<!-- Modal -->
	<div class="modal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Modal title</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Modal body text goes here.</p>
				</div>
				<div class="modal-footer">
					<div class="precio"></div>
					<button id="comprar" type="button" class="btn btn-primary">Purchase</button>
				</div>
			</div>
		</div>
	</div>
	<nav class="navbar navbar-expand-lg">
		<a class="navbar-brandn" href="index.html"><img class="logo" src="img/logo.jpg"></a>
		<div class="collapse navbar-collapse " id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link admin" href="admin.html">Admin<span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="http://10.22.72.108:8080/proyecto_final/CCarrito"><img class="carrito" src="img/carrito.svg"></a>
				</li>
			</ul>
		</div>
	</nav>
	<div class="background">

		<!-- Navbar -->

		<div class="lateral">
			<div class="fixed"><div class="filtros"><h3>Filtros</h3></div></div>
			
			
		</div>


		<div class="container">
			<!-- Se imprimen aqui los productos -->
			<div class="row"></div>

		</div>
	</div>

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>

	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

 -->
	<script>
		$(document)
			.ready(
				function () {
					var id_carrito = 0;
					var url = 'http://10.22.72.108:8080/proyecto_final/CJson';
					$.getJSON(url, function (response) {
						console.log(response);
						printProducts(response);
					});
					var urlmarca = 'http://10.22.72.108:8080/proyecto_final/CJsonMarca';
					$.getJSON(urlmarca, function (response) {
						console.log(response);
						printMarcas(response);
					});

					function printProducts(response) {
						var htmlzatia = '';
						for (i in response) {

							htmlzatia = '<div class="card col-sm-4" data-id="'+response[i].id_producto+'" data-precio="'+response[i].precio+'">';
							htmlzatia += '<div class="card-img"><img  " data-imagen="' + response[i].imagen + '" data-nombre="' + response[i].nombre + '" src="' + response[i].imagen + '" class="card-img-top"></div>';
							htmlzatia += '<div class="card-body">';
							htmlzatia += '<h1>' + response[i].nombre + '</h1>';
							htmlzatia += '</div>';
							htmlzatia += '</div>';


							$(".row").append(htmlzatia);
						}
						$(".card").on("click", function (response) {
							$(".carrito").fadeIn();
							var nombreProducto = $(this).children('img').data('nombre');
							var src = $(this).children("img").data('imagen');
							var precio = $(this).data('precio');
							var id = $(this).data("id");
							$('.modal').modal('show');
							$('.modal-title').html(nombreProducto);
							$('.modal-body').html('<img width="100%" src="' + src + '">');
							$('.precio').html(precio+"â‚¬");
							$('#comprar').on("click", function(){

								var myCarrito= []; //Array
								
								var myProducto= [];
								myProducto.push(id);
								myProducto.push(precio);
								myCarrito.push(myProducto);
								console.log(myCarrito);
								
								$(".carrito").on("click", function(){
									for (i in myCarrito){
									console.log(myCarrito[i]);
									localStorage.setItem(myCarrito[i]);
								}
								})
							});

						});
					}
					/* 



 */
					function printMarcas(response) {
						htmlzatia = ''
						for (i in response) {
							htmlzatia = '<div class="row">';
							htmlzatia += '<div class="col-3">';
							htmlzatia += '<div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">';
							htmlzatia += '<a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" data-nombre="'+response[i].nombre+'" aria-selected="true">' + response[i].nombre + '</a>';
							htmlzatia += '</div>';
							htmlzatia += '</div>';
							

							$('.lateral').children().append(htmlzatia);
						}
					}
				})
	</script>
</body>

</html>